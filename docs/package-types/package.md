---
parent: Package Types
nav_order: 30
title: package
---

# Package

Modular `package`s are generic, publishable libraries with a single entry-point
file. They are built with [Rollup.js](https://rollupjs.org/guide/en/) and they
are not bundled in a single blob; files required directly or indirectly from the
entry point are separately transpiled as CommonJS Modules and ES Modules
(although it's not a 1:1 correspondence: the compilation process typically
creates additional files to normalize exports). External dependencies are not
included in the compilation output, but they are copied in the output
`package.json` to be eventually consumed by a bundler. Modular calculates the
package entry-point by looking at the `main` field in the package's
`package.json`; by default, `modular add`ing a new package sets it as
`"./src/index.ts"`, but it's possible to manually modify it. Packages can be
[`test`](../commands/test.md)ed and [`built`](../commands/build.md) by Modular
but, since they don't necessarily export UI functionality, they can't be
[`start`](../commands/start.md)ed. If you need a piece of publishable UI (React)
code that can be previewed locally, you should use `view`s.

Packages are generated by `modular add` using the
[`modular-template-package`](https://github.com/jpmorganchase/modular/tree/main/packages/modular-template-package)
[template](./template.md).

## Build output

This is what the build output of a Modular `package` looks like:

```
<modular-root>/dist/<your-package-name>
├── dist-cjs
|  ├── index.js
|  ├── index.js.map
|  ├── index2.js
|  └── index2.js.map
├── dist-es
|  ├── index.js
|  ├── index.js.map
|  ├── index2.js
|  └── index2.js.map
├── dist-types
|  └── index.d.ts
└── package.json
```

Modular transpiles the `package` starting from its entry-point twice: once with
a target format of [CommonJS](https://nodejs.org/api/modules.html) in the
`dist-cjs` directory and once with a target format of
[ES Modules](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules),
in the `dist-es` directory. The output `package.json` links both compiled
entry-points respectively in the
[`main`](https://docs.npmjs.com/cli/v9/configuring-npm/package-json#main) and
[`module`](https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md)
field.

Modular also extracts types from the source and outputs them in the `dist-types`
directory, linking them in the
[`typings`](https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html)
manifest field. Here's an example of an output `package.json` generated when
building a Modular `package`:

```json
{
  "name": "<your-package-name>",
  "private": false,
  "modular": {
    "type": "package"
  },
  "main": "dist-cjs/index.js",
  "version": "1.0.0",
  "module": "dist-es/index.js",
  "typings": "dist-types/index.d.ts",
  "dependencies": {},
  "files": ["dist-cjs", "dist-es", "dist-types", "README.md"]
}
```

## When to use the "package" type

Modular `package`s are meant to provide re-usable functionality that can be
published to third-party registries (like
[the npm registry](https://www.npmjs.com/)) out-of-the-box; to underline this,
Modular will, for example, refuse to work with packages that have the
[`private`](https://docs.npmjs.com/cli/v9/configuring-npm/package-json#private)
field set. You should use packages _only when there is a need to consume their
build output_; if you just need to share some common source code inside your
monorepo but you don't need to publish it externally, you should use the
[`source`](./source.md) type instead.
